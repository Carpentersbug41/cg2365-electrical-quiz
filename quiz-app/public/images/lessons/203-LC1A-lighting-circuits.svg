<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
  <defs>
    <style>
      /* CSS Logic for Interactivity */
      .switch-arm { transition: transform 0.3s ease; transform-origin: -20px 0; transform: rotate(0deg); }
      .bulb-body { transition: fill 0.3s ease; }
      .glow { display: none; }
      .clickable { cursor: pointer; }
      
      /* State: ON */
      #diagram[data-state="on"] .switch-arm { transform: rotate(30deg); }
      #diagram[data-state="on"] .bulb-body { fill: #FFD700; }
      #diagram[data-state="on"] .glow { display: block; animation: pulse 2s infinite; }
      
      @keyframes pulse {
        0% { opacity: 0.6; }
        50% { opacity: 1; }
        100% { opacity: 0.6; }
      }
    </style>
    <pattern id="cpcPattern" width="10" height="10" patternTransform="rotate(45 0 0)" patternUnits="userSpaceOnUse">
      <rect width="10" height="10" fill="#228B22" />
      <rect width="5" height="10" fill="#FFFF00" />
    </pattern>
  </defs>

  <!-- Main Group with Click Handler -->
  <g id="diagram" data-state="off" onclick="
    var current = this.getAttribute('data-state');
    this.setAttribute('data-state', current === 'off' ? 'on' : 'off');
  ">
    
    <!-- Background -->
    <rect x="0" y="0" width="800" height="500" fill="#F9FAFB" rx="12" />

    <!-- SOURCE / CU -->
    <g transform="translate(50, 200)">
      <rect x="0" y="-60" width="80" height="120" fill="#E5E7EB" stroke="#374151" stroke-width="2" rx="4" />
      <text x="40" y="-70" text-anchor="middle" font-family="monospace" font-size="12" font-weight="bold" fill="#4B5563">SOURCE / CU</text>
      <circle cx="70" cy="-30" r="4" fill="#8B4513" />
      <text x="55" y="-26" font-family="monospace" font-size="10" fill="#6B7280">L</text>
      <circle cx="70" cy="0" r="4" fill="url(#cpcPattern)" stroke="gray" stroke-width="0.5" />
      <text x="55" y="4" font-family="monospace" font-size="10" fill="#6B7280">E</text>
      <circle cx="70" cy="30" r="4" fill="#0000CD" />
      <text x="55" y="34" font-family="monospace" font-size="10" fill="#6B7280">N</text>
    </g>

    <!-- Switch Box (Clickable) -->
    <g transform="translate(300, 350)" class="clickable">
      <rect x="-40" y="-40" width="80" height="80" fill="#FFFFFF" stroke="#374151" stroke-width="2" rx="4" />
      <text x="0" y="55" text-anchor="middle" font-family="monospace" font-size="12" font-weight="bold" fill="#4B5563">SWITCH (CLICK)</text>
      <circle cx="-20" cy="0" r="4" fill="#8B4513" />
      <text x="-35" y="4" font-family="monospace" font-size="10" fill="#6B7280">COM</text>
      <circle cx="20" cy="0" r="4" fill="#8B4513" />
      <text x="30" y="4" font-family="monospace" font-size="10" fill="#6B7280">L1</text>
      <rect x="-35" y="-35" width="10" height="10" fill="#A9A9A9" />
      <circle cx="-30" cy="-30" r="3" fill="url(#cpcPattern)" stroke="gray" stroke-width="0.5" />
      
      <!-- Animated Switch Arm -->
      <line class="switch-arm switch-line-visual" x1="-20" y1="0" x2="20" y2="-25" stroke="#374151" stroke-width="4" stroke-linecap="round" />
    </g>

    <!-- Load / Lamp -->
    <g transform="translate(600, 150)">
      <circle cx="0" cy="0" r="40" fill="#FFFFFF" stroke="#374151" stroke-width="2" />
      <text x="0" y="-50" text-anchor="middle" font-family="monospace" font-size="12" font-weight="bold" fill="#4B5563">LOAD (LAMP)</text>
      <circle cx="-20" cy="0" r="4" fill="#8B4513" />
      <circle cx="20" cy="0" r="4" fill="#0000CD" />
      <circle cx="0" cy="-25" r="4" fill="url(#cpcPattern)" stroke="gray" stroke-width="0.5" />

      <!-- Bulb -->
      <g transform="translate(0, 40)">
         <path class="bulb-body" d="M -15 0 L -15 20 Q -15 45 0 45 Q 15 45 15 20 L 15 0 Z" fill="white" stroke="#374151" stroke-width="2" />
         <!-- Glow Rays (Hidden by default) -->
         <g class="glow">
           <line x1="-20" y1="20" x2="-30" y2="10" stroke="#FFD700" stroke-width="2" />
           <line x1="20" y1="20" x2="30" y2="10" stroke="#FFD700" stroke-width="2" />
           <line x1="0" y1="50" x2="0" y2="60" stroke="#FFD700" stroke-width="2" />
         </g>
      </g>
    </g>

    <!-- WIRING -->
    <path d="M 120 170 L 150 170 L 150 350 L 260 350" fill="none" stroke="#8B4513" stroke-width="4" />
    <path d="M 320 350 L 450 350 L 450 150 L 580 150" fill="none" stroke="#8B4513" stroke-width="4" stroke-dasharray="8 4" /> 
    <rect x="560" y="146" width="10" height="8" fill="#8B4513" />
    <path d="M 120 230 L 180 230 L 180 100 L 620 100 L 620 150" fill="none" stroke="#0000CD" stroke-width="4" />
    <path d="M 120 200 L 165 200 L 165 320 L 270 320" fill="none" stroke="url(#cpcPattern)" stroke-width="3" />
    <path d="M 270 320 L 270 310 L 430 310 L 430 125 L 600 125" fill="none" stroke="url(#cpcPattern)" stroke-width="3" />

    <!-- LABELS -->
    <g transform="translate(180, 365)">
      <rect x="-5" y="-10" width="110" height="20" fill="white" fill-opacity="0.8" rx="4" />
      <text font-family="sans-serif" font-size="10" font-weight="bold" fill="#374151">Line Conductor</text>
    </g>
    <g transform="translate(350, 95)">
       <rect x="-5" y="-10" width="120" height="20" fill="white" fill-opacity="0.8" rx="4" />
      <text font-family="sans-serif" font-size="10" font-weight="bold" fill="#374151">Neutral Conductor</text>
    </g>
    <g transform="translate(300, 305)">
       <rect x="-5" y="-10" width="210" height="20" fill="white" fill-opacity="0.8" rx="4" />
      <text font-family="sans-serif" font-size="10" font-weight="bold" fill="#374151">Circuit Protective Conductor (CPC)</text>
    </g>
     <g transform="translate(460, 365)">
       <rect x="-5" y="-10" width="100" height="20" fill="white" fill-opacity="0.8" rx="4" />
      <text font-family="sans-serif" font-size="10" font-weight="bold" fill="#374151">Switched Line</text>
    </g>
  </g>
</svg>
